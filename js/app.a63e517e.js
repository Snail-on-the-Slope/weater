(function(e){function t(t){for(var r,i,o=t[0],c=t[1],h=t[2],l=0,d=[];l<o.length;l++)i=o[l],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&d.push(n[i][0]),n[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,h||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},n={app:0},s=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/weater/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var h=0;h<o.length;h++)t(o[h]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},5262:function(e,t,a){"use strict";a("8236")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app",attrs:{id:"app"}},[a("div",{staticClass:"app__setting"},[a("div",{staticClass:"app__date"},[e._v(e._s(e.dateBuilder()))]),a("div",{staticClass:"app__setting-icon",class:{"app__setting-icon_close":e.showSetting},on:{click:e.openSetting}})]),a("Setting",{directives:[{name:"show",rawName:"v-show",value:e.showSetting,expression:"showSetting"}]}),e.weathers&&!e.showSetting?e._l(e.weathers,(function(e,t){return a("Weather",{key:t,attrs:{weather:e}})})):e._e()],2)},s=[],i=(a("99af"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"setting"},[a("div",{staticClass:"setting__title"},[e._v("Settings")]),e.weathers?a("div",{staticClass:"setting__weathers"},[a("draggable",{attrs:{group:"weathers",handle:".weather__icon_menu"},on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1,e.chgWeather()}},model:{value:e.weathers,callback:function(t){e.weathers=t},expression:"weathers"}},e._l(e.weathers,(function(t,r){return a("div",{key:r,staticClass:"setting__weather weather"},[a("div",{staticClass:"weather__icon weather__icon_menu"}),a("div",{staticClass:"weather__text"},[e._v(" "+e._s(t.name)+", "+e._s(t.sys.country)+" ")]),a("div",{staticClass:"weather__icon weather__icon_trash",on:{click:function(a){return e.deleteWeather(t.name)}}})])})),0)],1):e._e(),a("div",{staticClass:"setting__search"},[a("div",{staticClass:"setting__search-text"},[e._v("Add Location:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],staticClass:"setting__search-bar",attrs:{type:"text",placeholder:"Search..."},domProps:{value:e.query},on:{keypress:e.fetchWeather,input:function(t){t.target.composing||(e.query=t.target.value)}}})])])}),o=[],c=(a("96cf"),a("1da1")),h=a("b76a"),u=a.n(h),l={name:"app",data:function(){return{query:"",weathers:[],drag:!1}},components:{draggable:u.a},created:function(){this.weathers=this.$store.getters.weathers},methods:{fetchWeather:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("Enter"!=e.key){a.next=5;break}return a.next=3,t.$store.dispatch("fetchWeather",t.query);case 3:t.query="",t.weathers=t.$store.getters.weathers;case 5:case"end":return a.stop()}}),a)})))()},deleteWeather:function(e){this.$store.dispatch("deleteWeatherByName",e),this.weathers=this.$store.getters.weathers},chgWeather:function(){this.$store.dispatch("updateWeathers",this.weathers)}}},d=l,w=(a("5262"),a("2877")),_=Object(w["a"])(d,i,o,!1,null,"cd36123e",null),p=_.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"weather"},[a("div",{staticClass:"weather__subtitle"},[e._v(" "+e._s(e.weather.name)+", "+e._s(e.weather.sys.country)+" ")]),a("div",{staticClass:"weather__wrap"},[a("div",{staticClass:"weather__temp"},[a("div",{staticClass:"weather__temp_icon"},[a("img",{attrs:{id:"wicon",src:"http://openweathermap.org/img/w/"+e.weather.weather[0].icon+".png",alt:"Weather icon"}})]),a("div",{staticClass:"weather__temp_text"},[e._v(" "+e._s(Math.round(e.weather.main.temp))+"°C ")])]),a("div",{staticClass:"weather__text mb"},[e._v(" Feels like "+e._s(Math.round(e.weather.main.feels_like))+"°C. "+e._s(e.weather.weather[0].description[0].toUpperCase()+e.weather.weather[0].description.slice(1).toLowerCase())+" ")]),a("div",{staticClass:"weather__block"},[a("div",{staticClass:"weather__block mr"},[a("div",{staticClass:"weather__icon weather__icon_wind"}),a("div",{staticClass:"weather__text"},[e._v(" "+e._s(Math.round(e.weather.wind.speed))+"m/s SSE ")])]),a("div",{staticClass:"weather__block"},[a("div",{staticClass:"weather__icon weather__icon_pressure"}),a("div",{staticClass:"weather__text"},[e._v(e._s(e.weather.main.pressure)+"hPa")])])]),a("div",{staticClass:"weather__block"},[a("div",{staticClass:"weather__text mr"},[e._v(" Humidity: "+e._s(e.weather.main.humidity)+"% ")]),a("div",{staticClass:"weather__text"},[e._v("Clouds: "+e._s(e.weather.clouds.all)+"%")])]),a("div",{staticClass:"weather__text"},[e._v(" Visibility: "+e._s(+(e.weather.visibility/1e3).toFixed(1))+"km ")])])])},g=[],v={name:"Weather",props:["weather"]},m=v,y=(a("a8d6"),Object(w["a"])(m,f,g,!1,null,"2c4e09e7",null)),b=y.exports,C={name:"App",data:function(){return{showSetting:!1,weathers:[]}},created:function(){localStorage.weathers&&(this.$store.dispatch("downloadWeathers"),this.weathers=this.$store.getters.weathers);var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){console.log("Геолокация доступна"),e.$store.dispatch("fetchWeatherByLL",[t.coords.latitude,t.coords.longitude]),e.weathers=e.$store.getters.weathers}),(function(e){console.log("Геолокация не доступна",e)})):console.log("Геолокация не доступна"),window.addEventListener("beforeunload",this.leaving)},methods:{openSetting:function(){this.showSetting&&(this.weathers=this.$store.getters.weathers),this.showSetting=!this.showSetting},leaving:function(){localStorage.weathers=JSON.stringify(this.$store.getters.weathers)},dateBuilder:function(){var e=new Date,t=["January","February","March","April","May","June","July","August","September","October","November","December"],a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r=a[e.getDay()],n=e.getDate(),s=t[e.getMonth()],i=e.getFullYear();return"".concat(r," ").concat(n," ").concat(s," ").concat(i)}},components:{Weather:b,Setting:p}},x=C,S=(a("5c0b"),Object(w["a"])(x,n,s,!1,null,null,null)),W=S.exports,k=(a("4de4"),a("b0c0"),a("2f62")),O=a("bc3a"),$=a.n(O);r["a"].use(k["a"]);var j=new k["a"].Store({state:{weathers:[],api_key:"fb74b19a83ad1e2d95c6c0dd8a276d61",url_base:"https://api.openweathermap.org/data/2.5/"},mutations:{downloadWeathers:function(e){e.weathers=JSON.parse(localStorage.weathers)},addWeather:function(e,t){e.weathers.push(t)},updateWeathers:function(e,t){e.weathers=t},deleteWeather:function(e,t){e.weathers=e.weathers.filter((function(e){return e.name!==t}))}},actions:{downloadWeathers:function(e){try{e.commit("downloadWeathers")}catch(t){console.log(t)}},fetchWeather:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,$.a.get("".concat(e.state.url_base,"weather?q=").concat(t,"&units=metric&APPID=").concat(e.state.api_key)).then((function(t){e.commit("addWeather",t.data)})).catch((function(e){console.log(e)}));case 2:case"end":return a.stop()}}),a)})))()},fetchWeatherByLL:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,$.a.get("".concat(e.state.url_base,"weather?lat=").concat(t[0],"&lon=").concat(t[1],"&appid=").concat(e.state.api_key,"&units=metric")).then((function(t){e.commit("addWeather",t.data)})).catch((function(e){console.log(e)}));case 2:case"end":return a.stop()}}),a)})))()},deleteWeatherByName:function(e,t){try{e.commit("deleteWeather",t)}catch(a){console.log(a)}},updateWeathers:function(e,t){try{e.commit("updateWeathers",t)}catch(a){console.log(a)}}},getters:{weathers:function(e){return e.weathers}}});r["a"].config.productionTip=!1,new r["a"]({store:j,render:function(e){return e(W)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";a("9c0c")},8236:function(e,t,a){},"9c0c":function(e,t,a){},a8d6:function(e,t,a){"use strict";a("c71b")},c71b:function(e,t,a){}});
//# sourceMappingURL=app.a63e517e.js.map